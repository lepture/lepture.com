<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Create a StatusBar App — Just lepture</title>
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png">
  <link rel="logo" type="image/svg" href="/logo.svg">
  <link rel="dns-prefetch" href="http://dn-lepture.qbox.me">
  <link rel="alternate" type="application/atom+xml" title="Subscribe Feed" href="http://feeds.lepture.com/lepture">
<meta property="og:type" content="article">
<meta property="og:title" content="Create a StatusBar App">
<meta property="og:url" content="http://lepture.com/en/2012/create-a-statusbar-app">
  <meta name="description" content="A StatusBar App is what on the right side of the menu bar, it doesn't contain a main window.">
  <meta property="og:description" content="A StatusBar App is what on the right side of the menu bar, it doesn't contain a main window.">
  <meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@lepture">
<meta name="twitter:creator" content="@lepture">
<meta name="twitter:domain" content="lepture.com">
<meta property="og:site_name" content="Just lepture">
  <meta property="og:locale" content="en_US">
<link rel="canonical" href="http://lepture.com/en/2012/create-a-statusbar-app"><meta name="google-analytics" content="UA-21475122-1">
<meta name="google-site-verification" content="at2ye66Rzr0dthIDpBZfL4nUZWPBS336jT9NUHaLSHM" />
<link rel="stylesheet" href="/assets/site.css?t=1437645997">
<link rel="stylesheet" href="/assets/font.css?t=1437645997"></head>
<body>
  <header id="header">
    <div class="container yue">
      <a id="brand" role="banner" href="/">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="24px" height="24px" viewBox="0 0 240 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>lepture</title>
    <description>Created with Sketch (http://www.bohemiancoding.com/sketch)</description>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <path d="M156.613464,113.999999 L235.90968,113.999965 C233.495105,53.9540791 182.972141,6 121,6 C57.4872506,6 6,56.3679626 6,118.5 C6,180.632037 57.4872506,231 121,231 C182.627716,231 232.933165,183.577472 235.86497,124.000065 L235.864973,124 L156.613465,124 C154.053154,140.407155 139.083693,153 121,153 C101.117748,153 85,137.777682 85,119 C85,100.222318 101.117748,85 121,85 C139.083692,85 154.053154,97.5928448 156.613464,113.999999 Z" id="Oval-1" fill="#000000" sketch:type="MSShapeGroup"></path>
    </g>
</svg>        <strong>Just lepture</strong>
      </a>
      <nav id="nav" role="navigation">
          <a href="/resume">About</a>
          <a href="/zh/">Chinese</a>
          <a href="/en/">English</a>
      </nav>
    </div>
  </header>
    <article id="main" role="main" class="hentry yue" itemscope itemtype="http://schema.org/Article">
<div class="entry-header">
  <div class="container">
    <h1 class="entry-title" itemprop="name">Create a StatusBar App</h1>
    <p class="entry-description" itemprop="headline">A StatusBar App is what on the right side of the menu bar, it doesn't contain a main window.</p>

    <div class="entry-meta">
        <time class="updated" datetime="2012-07-20T21:15:00+08:00" itemprop="datePublished" pubdate>
          Jul 20, 2012
        </time>
        <span>523 words</span>

        <a class="button" rel="nofollow" href="https://github.com/lepture/StatusBarApp">GitHub</a>
    </div>
  </div>
</div>
  <div class="entry-content container" itemprop="articleBody">
    <p>It has been months since I decided to learn cocoa development, but in vain.
Unlike python, the documentation of cocoa tortures me a lot.</p>
<p>I am still new to cocoa development. And this post will be part of my learning series.
I didn't mean to teach you anything, on the contrary, it is a track of my learing.
But it may be a little helpful to you.</p>
<h2>StatusBar App</h2>
<p>A <strong>StatusBar App</strong> is what on the right side of the menu bar, it doesn't contain a main window.
For example, the volumn control is a StatusBar App.</p>
<h2>Demo Time</h2>
<p>It's the time to create a StatusBar App now.</p>
<ol>
<li><p>Open your Xcode (I am on Xcode 4.3.3)</p>
</li>
<li><p>Create a cocoa application project</p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step1.jpg" alt="create a project" /></figure>
</li>
<li><p>Name the project <strong>StatusBarApp</strong></p>
</li>
<li><p>Run for testing</p>
</li>
</ol>
<p>Now you will get an App with window. However, our app is a StatusBar App, it has no window.</p>
<p>The final app should be like:</p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/application.jpg" alt="application" /></figure>
<h3>Menu</h3>
<p>We will create the menu first.</p>
<ol>
<li><p>Drag a menu to the interface builder</p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step2.jpg" alt="drag a menu" /></figure>
</li>
<li><p>Edit the menu item</p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step3.jpg" alt="edit menu item" /></figure>
</li>
<li><p>Decorate the menu with seprator</p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step4.jpg" alt="decorate with seprator" /></figure>
</li>
<li><p>Connect the menu to your code outlet, and name it <code>statusMenu</code></p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step5.jpg" alt="connect menu outlet" /></figure>
</li>
</ol>
<h3>StatusBar</h3>
<p>Create the statusBar property in your <code>AppDelegate.h</code> file:</p>
<div class="highlight"><pre><span class="k">@property</span> <span class="p">(</span><span class="k">strong</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="n">NSStatusItem</span> <span class="o">*</span><span class="n">statusBar</span><span class="p">;</span>
</pre></div>
<p>Synthesize it in the <code>AppDelegate.m</code> file:</p>
<div class="highlight"><pre><span class="k">@synthesize</span> <span class="n">statusBar</span> <span class="o">=</span> <span class="n">_statusBar</span><span class="p">;</span>
</pre></div>
<p>Initialize the statusBar:</p>
<div class="highlight"><pre><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">awakeFromNib</span> <span class="p">{</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">statusBar</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSStatusBar</span> <span class="n">systemStatusBar</span><span class="p">]</span> <span class="nl">statusItemWithLength</span><span class="p">:</span><span class="n">NSVariableStatusItemLength</span><span class="p">];</span>

    <span class="nb">self</span><span class="p">.</span><span class="n">statusBar</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">@&quot;G&quot;</span><span class="p">;</span>

    <span class="c1">// you can also set an image</span>
    <span class="c1">//self.statusBar.image =</span>

    <span class="nb">self</span><span class="p">.</span><span class="n">statusBar</span><span class="p">.</span><span class="n">menu</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">statusMenu</span><span class="p">;</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">statusBar</span><span class="p">.</span><span class="n">highlightMode</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><code>awakeFromNib</code> is earlier than <code>applicationDidFinishLaunching</code> in the lifecycle.</p>
<h3>App Go</h3>
<p>Let's test this application.</p>
<ol>
<li>Run you app now. You will see a <strong>G</strong> in the menu bar.</li>
<li>Delete the useless window in your <code>MainMenu.xib</code>, and run your app again.</li>
</ol>
<p>It works! But it doesn't work the right way. It is on the dock, it shows the menu on the left.</p>
<p>Fix it in <code>StatusBarApp-Info.plist</code>, add a row:</p>
<pre><code>Application is agent (UIElement)  = YES</code></pre>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step6.jpg" alt="connect menu outlet" /></figure>
<p>Run your application again, it won't be on the dock, it won't show the menu.</p>
<h3>Do More</h3>
<p>But you can't quit the application, that could be annoying. We did have a Quit item on the application, but it won't work right now.</p>
<p>Fix it:</p>
<figure><img data-src="https://github.com/lepture/StatusBarApp/raw/master/assets/Step7.jpg" alt="quit" /></figure>
<h2>Reference:</h2>
<ul>
<li><a href="http://cocoatutorial.grapewave.com/2010/01/creating-a-status-bar-application/">Creating a Status Bar Application</a></li>
<li><a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSStatusItem_Class/Reference/Reference.html">NSStatusItem Class Reference</a></li>
</ul>

  </div>

    <span class="author vcard hide">
      <span class="fn" itemprop="author">Hsiaoming Yang</span>
    </span>
  </div>

  <div class="entry-extra container">
    <div class="entry-tags">
      <a class="tag" href="/archive#learning">learning</a>
      <a class="tag" href="/archive#cocoa">cocoa</a>
    </div>
    <div class="social-button" data-url="http://lepture.com/en/2012/create-a-statusbar-app" data-text="Create a StatusBar App — A StatusBar App is what on the right side of the menu bar, it doesn't contain a main window." data-twitter="lepture" data-weibo="lepture" data-facebook="lepture" data-count="true"></div>
  </div>

</article>


<div class="entry-comments yue">
  <div id="disqus_thread" class="container"></div>
</div>
<script>
    var disqus_shortname='lepture';
    var disqus_title='Create a StatusBar App';
    var disqus_url='http://lepture.com/en/2012/create-a-statusbar-app';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <footer id="footer" role="contentinfo">
    <div class="container">
      <p>&copy; Copyright 2010 - 2015 by Hsiaoming Yang.</p>
    </div>
  </footer>
  <script src="/assets/site.js?t=1437795036"></script>
</body>
</html>