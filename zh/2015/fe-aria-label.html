<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>前端的基礎修養：aria-label — Just lepture</title>
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152.png">
  <link rel="logo" type="image/svg" href="/logo.svg">
  <link rel="dns-prefetch" href="http://dn-lepture.qbox.me">
  <link rel="alternate" type="application/atom+xml" title="Subscribe Feed" href="http://feeds.lepture.com/lepture">
  <meta name="google-site-verification" content="at2ye66Rzr0dthIDpBZfL4nUZWPBS336jT9NUHaLSHM" />
  <link rel="stylesheet" href="/assets/site.css?t=1437645997">
  <link rel="stylesheet" href="/assets/font.css?t=1437645997">
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-21475122-1');
(function(d){
    var title="前端的基礎修養：aria-label";
  ga('send', 'pageview', {
    page: location.pathname,
    location: location.href,
    title: title,
  });
})(document);</script>
</head>
<body>
  <header id="header">
    <div class="container yue">
      <a id="brand" href="/">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="24px" height="24px" viewBox="0 0 240 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>lepture</title>
    <description>Created with Sketch (http://www.bohemiancoding.com/sketch)</description>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <path d="M156.613464,113.999999 L235.90968,113.999965 C233.495105,53.9540791 182.972141,6 121,6 C57.4872506,6 6,56.3679626 6,118.5 C6,180.632037 57.4872506,231 121,231 C182.627716,231 232.933165,183.577472 235.86497,124.000065 L235.864973,124 L156.613465,124 C154.053154,140.407155 139.083693,153 121,153 C101.117748,153 85,137.777682 85,119 C85,100.222318 101.117748,85 121,85 C139.083692,85 154.053154,97.5928448 156.613464,113.999999 Z" id="Oval-1" fill="#000000" sketch:type="MSShapeGroup"></path>
    </g>
</svg>        <strong>Just lepture</strong>
      </a>
      <nav id="nav">
          <a href="/resume">About</a>
          <a href="/zh/">Chinese</a>
          <a href="/en/">English</a>
      </nav>
    </div>
  </header>
    <article id="main" role="main" class="hentry yue" itemscope itemtype="http://schema.org/Article">
<div class="entry-header">
  <div class="container">
    <h1 class="entry-title" itemprop="name">前端的基礎修養：aria-label</h1>
    <p class="entry-description" itemprop="headline">aria-label 是一個 HTML attribute，用來告訴讀屏軟件某個元素是什麼，提升 Web Accessibility。</p>

    <div class="entry-meta">
        <time class="updated" datetime="2015-08-12T21:40:00+08:00" itemprop="datePublished" pubdate>
          Aug 12, 2015
        </time>
        <span>1470 words</span>

    </div>
  </div>
</div>
  <div class="entry-content container" itemprop="articleBody">
    <p>「前端的基礎修養」是我擬寫的一系列文章的總標題。所以喚作「修養」，大抵因為心虛，覺得沒有什麼技術含量，不便言之技術。這一系列會以亂序呈現，同一主題的文章會穿插出現。</p>
<p>這一篇談 Accessibility 相關的主題——aria-label 的使用。Accessibility 作為一個整體，是一個龐大而複雜的主題。這裡單講 aria-label，因其比較簡單與實用，作為切入點正合適。</p>
<p>可能有人不理解什麼是 Accessibility，這裡簡單解釋一下。比如地鐵有大通道方便輪椅通過，比如紅綠燈有聲音提示方便盲人通行，比如鼠標有左手模式方便習慣用左手的人使用。讓更廣泛（生理上有所不同）的人群可以使用，就是 Accessibility。</p>
<p>這個話題去歲在台灣談過，是參加 JSDC 2014 時講的，<a href="/zh/2014/talk-on-accessibility-jsdc2014">不被重視的 HTML：Accessibility</a>。</p>
<h2>aria-label 初窺</h2>
<p>aria-label 是一個 HTML attribute，用來告訴讀屏軟件某個元素是什麼。例如一個關閉按鈕「×」，視覺上看來都能理解，但是讀屏軟件並不能正確讀出，這時就可以用 <code>aria-label</code> 告訴它：</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">aria-label=</span><span class="s">&quot;關閉&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;times;</span><span class="nt">&lt;/button&gt;</span>
</pre></div>
<p>讀屏軟件（比如說 Voice Over）就會讀出「按鈕，關閉」。圖片 <code>&lt;img&gt;</code> 的 <code>alt</code> 屬性亦有此效果，因為圖片本身是沒有辦法被讀出的，所以讀屏軟件會去閱讀 <code>alt</code> 的內容。</p>
<p>假如 <code>&lt;img&gt;</code> 標籤同時有 <code>aria-label</code> 與 <code>alt</code> 屬性，那麼讀屏軟件應該閱讀哪個的內容呢？答案當然是 <code>aria-label</code>。這裡需要明白 <code>alt</code> 本身還有另一個作用，當圖片無法加載時，瀏覽器會將 <code>alt</code> 的內容展示給用戶。</p>
<figure><img data-src="//dn-lepture.qbox.me/blog/image-alt.jpg" alt="alt 在各個瀏覽器里的顯示情況" /><figcaption>alt 在各個瀏覽器里的顯示情況</figcaption></figure><h2>aria-label 與 title</h2>
<p>全局屬性 <code>title</code> 是用作提示與補充的，你認為讀屏軟件會識別 <code>title</code> 麼？完全不會，Voice Over<sup class="footnote-ref" id="fnref-vo"><a href="#fn-vo" rel="footnote">1</a></sup>、JAWS<sup class="footnote-ref" id="fnref-jaws"><a href="#fn-jaws" rel="footnote">2</a></sup>、NVDA<sup class="footnote-ref" id="fnref-nvda"><a href="#fn-nvda" rel="footnote">3</a></sup> 都不會去識別，<code>title</code> 對於 Accessibility 毫無幫助。</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">title=</span><span class="s">&quot;設置&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;gear.png&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</pre></div>
<p>這段代碼是一個鏈接，使用一個圖片表示「設置」，使用 <code>title</code> 注釋。如果鼠標懸浮在鏈接上的話，會出現提示，但是讀屏軟件根本無法識別。你應該使用 <code>aria-label</code> 來代替 <code>title</code>:</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;設置&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;gear.png&quot;</span><span class="nt">&gt;&lt;/a&gt;</span>
</pre></div>
<h2>aria-label 與 iconfont</h2>
<p>多數網站已經不使用圖片來表示 icon 了，轉而使用 iconfont 又或者 svg。無論是哪種方案，圖標都只是給視覺正常的人使用的。這個時候你需要使用 <code>arial-label</code> 來標注：</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;設置&quot;</span><span class="nt">&gt;&lt;/i&gt;&lt;/a&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;設置&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span><span class="nt">&gt;&lt;/i&gt;&lt;/a&gt;</span>
</pre></div>
<p>上面的例子里給出了兩種方案，一是在圖標本身的標籤上，一是在鏈接 <code>&lt;a&gt;</code> 上，兩種方案讀屏軟件都能正確識別，但是個人以為放在鏈接 <code>&lt;a&gt;</code> 上比較好，比如鏈接里是圖標加文字說明的形式：</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;設置&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> 設置<span class="nt">&lt;/a&gt;</span>
</pre></div>
<p>這時便不能在 iconfont 上添加 <code>aria-label</code> 了，否則會念兩遍「設置」，但是這種情況更好的方法是使用 <code>aria-hidden</code>：</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;icon-gear&quot;</span> <span class="na">aria-hidden=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> 設置<span class="nt">&lt;/a&gt;</span>
</pre></div>
<h2>aria-label 作為提示</h2>
<p>但是許多時候，即使你能看清楚圖標，你也完全不知道那是個什麼鬼東西，圖標始終是一個抽象概念，並非人人都能理解。我們常會用 tooltip 作為提示，比如 <a href="http://onehackoranother.com/projects/jquery/tipsy/">jquery.tipsy</a>。</p>
<p>jquery.tipsy 這個插件默認使用 <code>title</code> 作為數據來源，也可以使用其它屬性：</p>
<div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#example-custom-attribute&#39;</span><span class="p">).</span><span class="nx">tipsy</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;aria-label&#39;</span><span class="p">});</span>
</pre></div>
<p>GitHub 使用的純 CSS 方案不錯，使用 CSS <code>attr()</code> 獲取 arial-label 的內容作為提示，在不需要兼容老舊瀏覽器的情況下建議使用，整理代碼如下：</p>
<div class="highlight"><pre><span class="nc">.tip</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.tip</span><span class="nd">:before</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
  <span class="k">bottom</span><span class="o">:</span> <span class="m">-7px</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="m">-5px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="k">border</span><span class="o">:</span> <span class="m">5px</span> <span class="k">solid</span> <span class="k">transparent</span><span class="p">;</span>
  <span class="k">border-bottom-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">9</span><span class="p">);</span>
  <span class="k">pointer</span><span class="o">-</span><span class="n">events</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">z-index</span><span class="o">:</span> <span class="m">10000</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.tip</span><span class="nd">:after</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">3px</span><span class="p">;</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">9</span><span class="p">);</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">11px</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="m">500</span><span class="p">;</span>
  <span class="k">content</span><span class="o">:</span> <span class="n">attr</span><span class="p">(</span><span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="p">);</span>
  <span class="k">white-space</span><span class="o">:</span> <span class="n">pre</span><span class="p">;</span>
  <span class="k">z-index</span><span class="o">:</span> <span class="m">10000</span><span class="p">;</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="k">line-height</span><span class="o">:</span> <span class="m">26px</span><span class="p">;</span>
  <span class="n">transform</span><span class="o">:</span> <span class="n">translateX</span><span class="p">(</span><span class="m">50%</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<figure><img data-src="//dn-lepture.qbox.me/blog/github-aria-label.png" alt="GitHub aria-label 提示" /><figcaption>GitHub 使用 aria-label 提示</figcaption></figure><h2>aria-label 與表單</h2>
<p><code>placeholder</code> 的出現導致了大量不帶 <code>&lt;label&gt;</code> 的 form 表單，然而<strong>讀屏軟件是不會識別 <code>placeholder</code></strong> 的。例如：</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;用戶名&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;郵箱&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>對於視覺正常的人來說沒有問題，但是在讀屏軟件看來它只是兩個輸入框，至於需要輸入什麼，它是不知道的。這個時候你需要用 <code>aria-label</code> 再次標注：</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;用戶名&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;用戶名&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;郵箱&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;郵箱&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>還有另外一種方案，使用 <code>&lt;label&gt;</code>，但是不顯示 <code>&lt;label&gt;</code>：</p>
<div class="highlight"><pre><span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span> <span class="na">class=</span><span class="s">&quot;sr-only&quot;</span><span class="nt">&gt;</span>用戶名<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;username&quot;</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;用戶名&quot;</span><span class="nt">&gt;</span>
</pre></div>
<p>使用 CSS 來隱藏 <code>.sr-only</code>(screen reader only) 這個 class 的標籤，注意不能使用 <code>display: none</code>，否則讀屏軟件會忽略，只在<a href="http://a11yproject.com/posts/how-to-hide-content/">視覺上將其隱藏</a>即可。</p>
<h2>索引</h2>
<p><code>aria-label</code> 理論上是作用於所有 tag 的，但是我實際測試下來，不支持 h(n) 例如 h1-h6。</p>
<ul>
<li><a href="https://dev.opera.com/articles/ux-accessibility-aria-label/">dev.opera.com/articles/ux-accessibility-aria-label/</a></li>
<li><a href="http://webaim.org/techniques/forms/advanced">webaim.org/techniques/forms/advanced</a></li>
<li><a href="http://www.deque.com/blog/text-links-practices-screen-readers/">www.deque.com/blog/text-links-practices-screen-readers/</a></li>
<li><a href="http://www.w3.org/TR/2015/WD-aria-in-html-20150521/">www.w3.org/TR/2015/WD-aria-in-html-20150521/</a></li>
</ul>
<div class="footnotes">
<hr>
<ol><li id="fn-vo"><p>Voice Over 是 Apple (Mac &amp; iOS) 的讀屏軟件<a href="#fnref-vo" rev="footnote">&#8617;</a></p></li>
<li id="fn-jaws"><p>JAWS 是一個讀屏軟件，適用於 Windows<a href="#fnref-jaws" rev="footnote">&#8617;</a></p></li>
<li id="fn-nvda"><p>NVDA 是一個開源讀屏軟件 <a href="http://www.nvaccess.org/">www.nvaccess.org/</a><a href="#fnref-nvda" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

  </div>

    <span class="author vcard hide">
      <span class="fn" itemprop="author">Hsiaoming Yang</span>
    </span>
  </div>

  <div class="entry-extra container">
    <div class="entry-tags">
      <a class="tag" href="/archive#fe-basic">fe-basic</a>
      <a class="tag" href="/archive#wai-aria">wai-aria</a>
    </div>
    <div class="social-button" data-url="http://lepture.com/zh/2015/fe-aria-label" data-text="前端的基礎修養：aria-label — aria-label 是一個 HTML attribute，用來告訴讀屏軟件某個元素是什麼，提升 Web Accessibility。" data-twitter="lepture" data-weibo="lepture" data-facebook="lepture" data-count="true"></div>
  </div>

</article>

  <script>
    var images = document.getElementsByTagName('img');
    if (images.length) {
      for (var i = 0; i < images.length; i++) {
        var src = images[i].getAttribute('data-src');
        if (src) images[i].src = src;
      }
    }
  </script>
<div class="entry-comments yue">
  <div id="disqus_thread" class="container"></div>
</div>
<script>
    var disqus_shortname='lepture';
    var disqus_title='前端的基礎修養：aria-label';
    var disqus_url='http://lepture.com/zh/2015/fe-aria-label';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <footer id="footer">
    <div class="container">
      <p>&copy; Copyright 2010 - 2015 by Hsiaoming Yang.</p>
    </div>
  </footer>
</body>
</html>