<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>前端的基礎修養：Microdata — Just lepture</title>
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152.png">
  <link rel="logo" type="image/svg" href="/logo.svg">
  <link rel="dns-prefetch" href="http://dn-lepture.qbox.me">
  <link rel="alternate" type="application/atom+xml" title="Subscribe Feed" href="http://feeds.lepture.com/lepture">
  <meta name="google-site-verification" content="at2ye66Rzr0dthIDpBZfL4nUZWPBS336jT9NUHaLSHM" />
<meta property="og:type" content="article">
<meta property="og:title" content="前端的基礎修養：Microdata">
<meta property="og:url" content="http://lepture.com/zh/2015/fe-microdata">
  <meta name="description" content="Microdata 是為機器而不是用戶所設計的，雖然目的是易於機器理解，但最終也能惠於用戶。">
  <meta property="og:description" content="Microdata 是為機器而不是用戶所設計的，雖然目的是易於機器理解，但最終也能惠於用戶。">
  <meta property="og:image" content="/apple-touch-icon-152.png">
  <meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@lepture">
<meta name="twitter:creator" content="@lepture">
<meta name="twitter:domain" content="lepture.com">
<meta property="og:site_name" content="Just lepture">
  <meta property="og:locale" content="zh_TW">
<link rel="canonical" href="http://lepture.com/zh/2015/fe-microdata">  <link rel="stylesheet" href="/assets/site.css?t=1446739391">
  <link rel="stylesheet" href="/assets/font.css?t=1437645997">
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-21475122-1');
(function(){
    var title="前端的基礎修養：Microdata";
  ga('send', 'pageview', {
    page: location.pathname,
    location: location.href,
    title: title,
  });
})();</script>
</head>
<body>
  <header id="header">
    <div class="container yue">
      <a id="brand" href="/">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="24px" height="24px" viewBox="0 0 240 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M156.613464,113.999999 L235.90968,113.999965 C233.495105,53.9540791 182.972141,6 121,6 C57.4872506,6 6,56.3679626 6,118.5 C6,180.632037 57.4872506,231 121,231 C182.627716,231 232.933165,183.577472 235.86497,124.000065 L235.864973,124 L156.613465,124 C154.053154,140.407155 139.083693,153 121,153 C101.117748,153 85,137.777682 85,119 C85,100.222318 101.117748,85 121,85 C139.083692,85 154.053154,97.5928448 156.613464,113.999999 Z" id="Oval-1" fill="#000000"></path>
    </g>
</svg>        <strong>Just lepture</strong>
      </a>
      <nav id="nav">
          <a href="/about">About</a>
          <a href="/zh/">Chinese</a>
          <a href="/en/">English</a>
      </nav>
    </div>
  </header>
    <article id="main" role="main" class="hentry yue" itemscope itemtype="http://schema.org/Article">
<div class="entry-header">
  <div class="container">
    <h1 class="entry-title" itemprop="name">前端的基礎修養：Microdata</h1>
    <p class="entry-description" itemprop="headline">Microdata 是為機器而不是用戶所設計的，雖然目的是易於機器理解，但最終也能惠於用戶。</p>

    <div class="entry-meta">
        <time class="updated" datetime="2015-07-23T22:17:00+08:00" itemprop="datePublished" pubdate>
          Jul 23, 2015
        </time>
        <span>2053 words</span>

    </div>
  </div>
</div>
  <div class="entry-content container" itemprop="articleBody">
    <p>「前端的基礎修養」是我擬寫的一系列文章的總標題。所以喚作「修養」，大抵因為心虛，覺得沒有什麼技術含量，不便言之技術。這一系列文章多與 HTML/XML 相關，許多主題一般前端從業者不是太知道，或者知道但不太重視，我以為很可惜。</p>
<p>這是「前端的基礎修養」系列文章的第一篇，單講 <a href="http://www.w3.org/TR/microdata/">Microdata</a> 相關的內容，剩下的主題每周不定期更新。</p>
<p>Microdata 是 HTML5 引入的，是為機器而不是用戶所設計的，主要目的是為了機器能更好的理解內容。這看起來與前端沒什麼關係，一般理解的前端是服務於用戶的，主要負責與用戶交互的部分。但是 microdata 是 HTML 的一部分，雖然目的是易於機器理解，但最終也能惠於用戶。</p>
<figure><img data-src="//dn-lepture.qbox.me/blog/schema-google.png" alt="Google 搜索結果展示" /></figure>
<p>Microdata 以機器可解析的語言來描述網頁里的內容是什麼，比如網頁描述的是一本書、一篇影評或者一張菜譜。例如上面的這張圖，展示的是我的<a href="/zh/2011/dajiangdahai">一篇書評</a>在 Google 搜索里的結果，它有作者信息、有評分、有發表時間，這都是因為這篇書評的網頁里使用 Microdata 標示出了相應的信息。</p>
<h2>Microdata 基礎</h2>
<p>Mircodata 主要用到這幾個 attributes 來標注信息：itemscope, itemtype, itemprop，另外還有 itemid 與 itemref。</p>
<p>包含 <strong>itemscope</strong> 這個 attribute 的 DOM 樹就是一個事物(item)，例如：</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">itemscope</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<p>我們可以給這個事物定義一個類型，比如一本書，這時就需要用到 <strong>itemtype</strong>，它的值是一個或多個 URL：</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">itemscope</span> <span class="na">itemtype=</span><span class="s">&quot;http://example.com/Book&quot;</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<p>如上的代碼片斷，我們知道它是一本書了，但是它還缺少書的信息，需要用 <strong>itemprop</strong> 來標示：</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">itemscope</span> <span class="na">itemtype=</span><span class="s">&quot;http://example.com/Book&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>書名：<span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>改革歷程<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>作者：<span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;author&quot;</span><span class="nt">&gt;</span>趙紫陽<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
  ...
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<p>也許因為奇怪的設計方案，也許因為 PM 的無理取鬧，也許就是因為代碼不太好寫，佈局並不能輕易合乎要求，itemprop 可能散落於其它地方，這時可以使用 <strong>itemref</strong> 將它們連接起來：</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">itemscope</span> <span class="na">itemtype=</span><span class="s">&quot;http://example.com/Book&quot;</span> <span class="na">itemref=</span><span class="s">&quot;a b&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>作者：<span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;author&quot;</span><span class="nt">&gt;</span>趙紫陽<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
  ...
<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- 因為某些原因，書名與價格不在 scope 裡面 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>書名：<span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>改革歷程<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;b&quot;</span><span class="nt">&gt;</span>價格：<span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;price&quot;</span><span class="nt">&gt;</span>$12<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
</pre></div>
<p>Microdata 也定義了 DOM API，目前只有 Firefox 與 Opera 支持，用途不太大，可以在 Firefox 的終端里測試一下：</p>
<div class="highlight"><pre><span class="nb">document</span><span class="p">.</span><span class="nx">getItems</span><span class="p">()</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getItems</span><span class="p">(</span><span class="s1">&#39;http://schema.org/Article&#39;</span><span class="p">)</span>
</pre></div>
<h2>Microdata 與 Schema.org</h2>
<p>Microdata 作為規範，定義好了語法，其中 <strong>itemtype</strong> 表示事物的類型。如果每一家都自己定義 <strong>itemtype</strong> 的話，結局將相當糟糕，網站開發者也將頭疼不已。於是 Google, Bing, Yandex, Yahoo! 合作創建了 Schema.org 用以統一規範 Microdata。</p>
<p>Schema.org 不是標準化組織，所做的卻是標準化的事情。查閱 <a href="https://schema.org/docs/gs.html">Schema.org 快速入門</a>文檔，瞭解如何使用。例如你正在看的這篇文章所在的頁面便在使用 <a href="http://schema.org/Article">schema.org/Article</a> 這個 itemtype，你可以查看一下本頁面的源碼。</p>
<p>Schema.org 定義了<a href="http://schema.org/docs/full.html">許多類型</a>，仍然在<a href="https://github.com/schemaorg/schemaorg">創建更多的類型</a>。這些定義對後端開發也有意義，幫助你理解業務模型，瞭解某一模型應該包含哪些數據，亦是不小的啓發。</p>
<p>比如我們來賣個車看看：<a href="http://schema.org/Car">schema.org/Car</a></p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">itemscope</span> <span class="na">itemtype=</span><span class="s">&quot;http://schema.org/Car&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h2</span> <span class="na">itemprop=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>奇瑞QQ<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">itemprop=</span><span class="s">&quot;description&quot;</span><span class="nt">&gt;</span>中國汽車製造商奇瑞汽車公司於2003年推出的一款微型車(...)<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">itemprop=</span><span class="s">&quot;image&quot;</span> <span class="na">href=</span><span class="s">&quot;2003_qq.png&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;strong&gt;</span>顏色<span class="nt">&lt;/strong&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;color&quot;</span><span class="nt">&gt;</span>黑色<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;strong&gt;</span>齒輪數<span class="nt">&lt;/strong&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;numberOfForwardGears&quot;</span><span class="nt">&gt;</span>6<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">itemprop=</span><span class="s">&quot;vehicleEngine&quot;</span> <span class="na">itemscope</span> <span class="na">itemtype=</span><span class="s">&quot;http://schema.org/EngineSpecification&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>
      <span class="nt">&lt;strong&gt;</span>引擎<span class="nt">&lt;/strong&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>1.1 L SQR472F I4 DOHC 16v — 50 kW at 6000 rpm, 90 N·m at 3500 rpm<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;strong&gt;</span>氣囊數<span class="nt">&lt;/strong&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">itemprop=</span><span class="s">&quot;airbags&quot;</span><span class="nt">&gt;</span>4<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<h2>RDFa, Microformats 與 JSON-LD</h2>
<p>結構化數據在 Microdata 出來之前就已經有了，比如 RDFa，比如 Microformats。Microdata 正是站在他們肩膀上，總結他們的得失利弊發展起來的。</p>
<p>Schema.org 的示例通常包含 Microdata，RDFa 與 JSON-LD 格式。RDFa 主要引入了 vocab, typeof 與 property 作為 attributes。這裡不再談 RDFa 的格式與實現，推薦使用 Microdata。但是需知 RDFa 仍然在被使用，比如豆瓣網，因為創建時間早，又沒有升級代碼，仍然使用著 RDFa，他們使用的字典集是 <a href="http://www.data-vocabulary.org/">www.data-vocabulary.org/</a>。</p>
<p>Microformats 已經十年了，這是一套使用 class 輔以其它屬性來標記事物的方案。比如這篇文章的這個頁面亦使用 Microformats 做了標注，類型是 <a href="http://microformats.org/wiki/hentry">hentry</a>。Microformats 現在推出了 2.0 版本，預測支持性不會太好，但是仍然值得一讀，當作指導前端的 class 命名也不錯。正在使用的 hentry 是 1.0:</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;hentry&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">&quot;entry-title&quot;</span><span class="nt">&gt;</span>前端的基礎修養：Microdata<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;entry-content&quot;</span><span class="nt">&gt;</span>...<span class="nt">&lt;/div&gt;</span>
  ...
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<p>JSON-LD 誕生的時間更晚，是一套使用 JSON 格式標注數據的方案。最大的優點是 JSON 格式便於解析，缺點是數據冗余，尤其是在需要 HTML 展示大段內容的情況下。</p>
<h2>Microdata &amp; Schema.org 的現狀與未來</h2>
<p>目前 Google, Bing, Yandex, Yahoo! 都支援 Microdata，但是進度不一效果不一，支援度最好的還是 Google。據說<a href="http://www.zhihu.com/question/19918861">百度也是支持的</a>。</p>
<p>各個搜索引擎商的接入文檔：</p>
<ol>
<li><a href="https://developers.google.com/structured-data/">developers.google.com/structured-data/</a></li>
<li><a href="http://www.bing.com/webmaster/help/marking-up-your-site-with-structured-data-3a93e731">www.bing.com/webmaster/help/marking-up-your-site-with-structured-data-3a93e731</a></li>
<li><a href="https://help.yandex.com/webmaster/microdata/what-is-microdata.xml">help.yandex.com/webmaster/microdata/what-is-microdata.xml</a></li>
<li><a href="https://help.yandex.com/webmaster/schema-org/what-is-schema-org.xml">help.yandex.com/webmaster/schema-org/what-is-schema-org.xml</a></li>
</ol>
<p>結構化的數據不僅僅能被這些 Web 搜索引擎使用，還能被諸如 Siri, Cortana 等語音設備使用，當然，他們也能被當作搜索引擎。例如我問 Siri 最近有什麼電影可看，於是找到了《模仿遊戲》</p>
<figure><img data-src="//dn-lepture.qbox.me/blog/siri-movie.jpg" alt="電影展示" /><figcaption>Siri 展示的模仿遊戲</figcaption></figure><p>這個內容來自<a href="http://www.rottentomatoes.com/">爛番茄</a>，爛番茄的網頁有使用 Schema.org 的 Microdata 標注，不知道 Siri 是否解析了 Microdata，還是專門為爛番茄作了解析。</p>
<p>再次詢問 Siri 附近吃飯的地方，返回了大眾點評的數據：</p>
<figure><img data-src="//dn-lepture.qbox.me/blog/siri-restaurants.jpg" alt="餐廳列表" /><figcaption>Siri 展示的餐廳列表</figcaption></figure><p>查看大眾點評的網頁，亦是使用 Schema.org 的 Microdata 標注的。</p>
<p>因為沒有 Android 與 Windows 手機，無法展示 Google Now 與 Cortana 的效果。查閱 <a href="https://msdn.microsoft.com/en-us/library/dn632191.aspx">Microsoft Cortana 的文檔</a>可知其是支持 Schema.org 的。Google Now 就更不必說了。</p>
<p>結構化的數據在未來相當有吸引力，方便未來的各種設備接入。比如「智能廚房」，你告訴它你要做什麼菜，於是它從<a href="http://www.xiachufang.com/">下廚房</a>找到了菜譜，因為下廚房使用了結構化數據，「智能廚房」就能直接列出需要的材料與材料的份量。</p>
<p>目前正在應用的點有很多，比如日曆、地圖、郵件等。尤其值得一提的是郵件，這個古老的通訊方式也許會在結構化數據下煥然一新。Gmail 已經在做<a href="https://developers.google.com/schemas/tutorials/embedding-schemas-in-emails">一系列嘗試</a>了，比如從郵件里提取出你的行程以及日程安排，比如匯總你的收據。</p>
<p>寫作此篇時發現國內不少網站已經在應用 Microdata 了，頗感欣慰。然而國內大廠們依舊我行我素，走著自己的獨木橋。</p>
<h2>索引</h2>
<ul>
<li>Microdata: <a href="http://www.w3.org/TR/microdata/">www.w3.org/TR/microdata/</a></li>
<li>JSON-LD: <a href="http://www.w3.org/TR/json-ld/">www.w3.org/TR/json-ld/</a></li>
<li>RDFa: <a href="http://www.w3.org/TR/xhtml-rdfa-primer/">www.w3.org/TR/xhtml-rdfa-primer/</a></li>
<li>Microformats: <a href="http://microformats.org/">microformats.org/</a></li>
<li>Embed Schemas in Emails: <a href="https://developers.google.com/schemas/tutorials/embedding-schemas-in-emails">developers.google.com/schemas/tutorials/embedding-schemas-in-emails</a></li>
</ul>

  </div>

    <span class="author vcard hide">
      <span class="fn" itemprop="author">Hsiaoming Yang</span>
    </span>
  </div>

  <div class="entry-extra container">
    <div class="entry-tags">
      <a class="tag" href="/archive#fe-basic">fe-basic</a>
      <a class="tag" href="/archive#html">html</a>
    </div>
  </div>

</article>

  <script>
    var images = document.getElementsByTagName('img');
    if (images.length) {
      for (var i = 0; i < images.length; i++) {
        var src = images[i].getAttribute('data-src');
        if (src) images[i].src = src;
      }
    }
  </script>
<div class="entry-comments yue">
  <div id="disqus_thread" class="container"></div>
</div>
<script>
    var disqus_shortname='lepture';
    var disqus_title='前端的基礎修養：Microdata';
    var disqus_url='http://lepture.com/zh/2015/fe-microdata';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <footer id="footer">
    <div class="container">
      <p>&copy; Copyright 2010 - 2015 by Hsiaoming Yang.</p>
    </div>
  </footer>
</body>
</html>